<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SupplierRequestsApp.Presentation.Pages.Order.StockTrackingPage"
             Title="Ð£Ñ‡ÐµÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²">
    <ContentPage.Content>
        <Grid Padding="20" ColumnSpacing="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>

            <VerticalStackLayout Grid.Column="0" Spacing="15">
                <Button Text="Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚Ð¾Ð²Ð°Ñ€" Clicked="OnAddNonDeficitProductToCart_Clicked" HorizontalOptions="Center"/>

                <Grid Padding="5" BackgroundColor="Transparent">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Label Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" FontAttributes="Bold" Grid.Column="0" VerticalOptions="Center"/>
                    <Label Text="ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ð½Ð° ÑÐºÐ»Ð°Ð´Ðµ" FontAttributes="Bold" Grid.Column="1" VerticalOptions="Center"/>
                    <Label Text="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" FontAttributes="Bold" Grid.Column="2" VerticalOptions="Center" HorizontalOptions="End"/>
                </Grid>

                <CollectionView ItemsSource="{Binding DeficitProducts}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout>
                                <Grid Padding="5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="2*" />
                                        <ColumnDefinition Width="1*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <Label Text="{Binding Product.Name}" Grid.Column="0" VerticalOptions="Center"/>
                                    <Label Text="{Binding Quantity}" Grid.Column="1" VerticalOptions="Center" TextColor="LightCoral"/>
                                    <Button Text="Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ" Grid.Column="2" HorizontalOptions="End" Clicked="OnOrderClicked"/>
                                </Grid>
                                <BoxView HeightRequest="1" BackgroundColor="Gray" Grid.ColumnSpan="3" Margin="0,5,0,5"/>
                            </StackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>

            <BoxView Grid.Column="1" WidthRequest="2" BackgroundColor="Gray" VerticalOptions="Fill"/>

            <VerticalStackLayout Grid.Column="2" Spacing="15" Padding="10" BackgroundColor="Transparent">
                <Label Text="ÐšÐ¾Ñ€Ð·Ð¸Ð½Ð°" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center"/>

                <Grid Padding="5" BackgroundColor="Transparent">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Label Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" FontAttributes="Bold" Grid.Column="0" VerticalOptions="Center"/>
                    <Label Text="ÐŸÐ¾ÑÑ‚Ð°Ð²Ñ‰Ð¸Ðº" FontAttributes="Bold" Grid.Column="1" VerticalOptions="Center"/>
                    <Label Text="ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾" FontAttributes="Bold" Grid.Column="2" VerticalOptions="Center"/>
                    <Label Text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" FontAttributes="Bold" Grid.Column="3" VerticalOptions="Center" HorizontalOptions="End"/>
                </Grid>

                <CollectionView ItemsSource="{Binding CartProducts}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="1*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <Label Text="{Binding Product.Name}" Grid.Column="0" VerticalOptions="Center"/>
                                <Label Text="{Binding SupplierName}" Grid.Column="1" VerticalOptions="Center"/>
                                <Label Text="{Binding Quantity}" Grid.Column="2" VerticalOptions="Center"/>
                                <Button Text="ðŸ—‘ï¸" Grid.Column="3" BackgroundColor="Red" TextColor="White"
                                        Clicked="OnRemoveFromCartClicked" CommandParameter="{Binding .}"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <Grid ColumnSpacing="10" VerticalOptions="End">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="4*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <Button Text="ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·" Grid.Column="0" HorizontalOptions="Fill" Padding="10" Clicked="OnPlaceOrderClicked"/>
                    <Button Text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" Grid.Column="1" BackgroundColor="DarkRed" TextColor="White"
                            HorizontalOptions="Fill" Padding="10" Clicked="OnClearCartClicked"/>
                </Grid>
            </VerticalStackLayout>
        </Grid>
    </ContentPage.Content>
</ContentPage>